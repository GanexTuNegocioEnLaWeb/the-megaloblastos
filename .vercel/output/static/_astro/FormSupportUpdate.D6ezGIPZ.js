import{w as F,v as x,a as p}from"./runtime-dom.esm-bundler.Cq4qZDBJ.js";import{m as w}from"./db.B_H6nRtK.js";import{_ as U}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as V,o as n,c as i,a as r,w as d,b as E,F as c,r as h,e as k,t as o,n as s,f as u,g as N,h as v,i as T}from"./runtime-core.esm-bundler.Ct5YNErD.js";const P=V({__name:"FormSupportUpdate",props:["material"],setup(S,{expose:t}){t();const m=S,e=N(m.material),f=v(()=>w.filter(l=>l.year==e.year)),g=v(()=>{const l=w.find(y=>`${y.name}`===e.materia);return l?l.docentes:[]}),a={1:"Primer",2:"Segundo",3:"Tercer",4:"Cuarto",5:"Quinto"},D=async l=>{if(!l.title)return alert("Título es obligatorio");if(!l.desc)return alert("Descripción es obligatoria");if(!l.materia)return alert("Materia es obligatoria");if(!l.docente)return alert("Docente es obligatorio");if(!l.url)return alert("Url es obligatorio");if(!(await fetch("/api/supportMaterial/update",{method:"POST",body:JSON.stringify(l)})).ok)return alert("Error al actualizar el material de apoyo");alert("Material de apoyo actualizado con exito"),window.location.reload()},b=T(!1),M={props:m,theSupportMaterial:e,materiasFiltradasByYear:f,docentesFiltrados:g,reWrite:a,createSupportMaterial:D,isOpen:b,openEdit:()=>{b.value=!b.value}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),B={class:"grid grid-cols-1 lg:grid-cols-2 lg:gap-8 place-items-start w-full"},O={class:"block"},C={class:"block"},A={class:"block"},q={class:"block"},z={class:"block"},W={class:"block"},Y=["value"],j={key:0,class:"block"},J=["value"],L={class:"block"},Q={key:1,class:"space-y-2 pt-4 w-full"},G={class:"py-6 px-8 bg-white dark:bg-neutral-800 shadow-md rounded-md"},H={class:"text-xl font-bold uppercase text-neutral-700 dark:text-neutral-50 border-b pb-4"},I={class:"py-2 font-medium text-neutral-600 dark:text-neutral-300"},K=["href"],R={class:"block w-full bg-white shadow-md dark:border-neutral-800 rounded-md py-4 px-8 dark:bg-neutral-800"};function X(S,t,m,e,f,g){return n(),i(c,null,[r("button",{onClick:e.openEdit,class:"w-full rounded-md bg-blue-500 py-2 text-white hover:bg-blue-600"},"Editar"),r("section",B,[e.isOpen?(n(),i("form",{key:0,onSubmit:t[8]||(t[8]=F(a=>e.createSupportMaterial(e.theSupportMaterial),["prevent"])),class:"w-full"},[r("label",O,[t[9]||(t[9]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Título",-1)),d(r("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.theSupportMaterial.title=a),type:"text",name:"title",class:"w-full border outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",required:""},null,512),[[x,e.theSupportMaterial.title]])]),r("label",C,[t[10]||(t[10]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Descripción",-1)),d(r("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.theSupportMaterial.desc=a),name:"desc",class:"w-full border min-h-20 outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",required:""},null,512),[[x,e.theSupportMaterial.desc]])]),r("label",A,[t[12]||(t[12]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Tipo de material de apoyo",-1)),d(r("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.theSupportMaterial.type=a),class:"w-full border outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",name:"type"},t[11]||(t[11]=[r("option",{value:""},"Seleccione un tipo",-1),r("option",{value:"otro"},"Otro",-1),r("option",{value:"Banco De Pregunta"},"Banco De Pregunta",-1)]),512),[[p,e.theSupportMaterial.type]])]),r("label",q,[t[13]||(t[13]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Url",-1)),d(r("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.theSupportMaterial.url=a),type:"url",name:"url",class:"w-full border outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",required:""},null,512),[[x,e.theSupportMaterial.url]])]),r("label",z,[t[15]||(t[15]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Año",-1)),d(r("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>e.theSupportMaterial.year=a),class:"w-full border outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",name:"year"},t[14]||(t[14]=[E('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option>',5)]),512),[[p,e.theSupportMaterial.year]])]),r("label",W,[t[17]||(t[17]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Materia",-1)),d(r("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>e.theSupportMaterial.materia=a),class:"w-full border outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",name:"materia"},[t[16]||(t[16]=r("option",{value:""},"Seleccione una materia",-1)),(n(!0),i(c,null,h(e.materiasFiltradasByYear,a=>(n(),i("option",{key:a.id,value:`${a.name}`},o(a.sigla)+" - "+o(a.name),9,Y))),128))],512),[[p,e.theSupportMaterial.materia]])]),e.theSupportMaterial.materia!==""&&e.theSupportMaterial.year?(n(),i("label",j,[t[19]||(t[19]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Docente",-1)),d(r("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>e.theSupportMaterial.docente=a),class:"w-full border outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",name:"docente"},[t[18]||(t[18]=r("option",{value:""},"Seleccione un docente",-1)),(n(!0),i(c,null,h(e.docentesFiltrados,a=>(n(),i("option",{key:a.id,value:a.name},o(a.name),9,J))),128))],512),[[p,e.theSupportMaterial.docente]])])):k("",!0),r("label",L,[t[21]||(t[21]=r("span",{class:"block text-neutral-700 dark:text-neutral-50"},"Parcial",-1)),d(r("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>e.theSupportMaterial.parcial=a),class:"w-full border outline-none bg-white dark:bg-neutral-800 dark:text-white rounded-md p-2",name:"parcial"},t[20]||(t[20]=[r("option",{value:"1"},"1",-1),r("option",{value:"2"},"2",-1),r("option",{value:"3"},"3",-1)]),512),[[p,e.theSupportMaterial.parcial]])]),t[22]||(t[22]=r("button",{type:"submit",class:"mt-4 bg-blue-500 text-white rounded-md p-2"}," Enviar ",-1))],32)):k("",!0),e.isOpen?(n(),i("ul",Q,[r("li",G,[r("h3",H,o(e.theSupportMaterial.title===""?"Título":e.theSupportMaterial.title),1),r("p",I,o(e.theSupportMaterial.desc===""?"Descripción":e.theSupportMaterial.desc),1),r("a",{class:"text-primary underline",target:"_blank",href:e.theSupportMaterial.url==""?"no-url":e.theSupportMaterial.url},"Ver",8,K)]),r("li",R,[t[29]||(t[29]=r("h5",{class:"text-lg font-semibold text-neutral-800 dark:text-neutral-200 pb-1 border-b"},"Meta Datos",-1)),r("p",{class:s(e.theSupportMaterial.url===""?"text-red-500":"text-green-500")},[t[23]||(t[23]=r("span",{class:"font-medium text-neutral-800 dark:text-neutral-200"},"Url: ",-1)),u(" "+o(e.theSupportMaterial.url===""?"No seleccionado":e.theSupportMaterial.url),1)],2),r("p",{class:s(e.theSupportMaterial.year===0?"text-red-500":"text-green-500")},[t[24]||(t[24]=r("span",{class:"font-medium text-neutral-800 dark:text-neutral-200"},"Año: ",-1)),u(" "+o(e.theSupportMaterial.year===0?"Año":e.reWrite[e.theSupportMaterial.year])+" Año ",1)],2),r("p",{class:s(e.theSupportMaterial.materia===""?"text-red-500":"text-green-500")},[t[25]||(t[25]=r("span",{class:"font-medium text-neutral-800 dark:text-neutral-200"},"Materia: ",-1)),u(" "+o(e.theSupportMaterial.materia===""?"No seleccionado":e.theSupportMaterial.materia),1)],2),r("p",{class:s(e.theSupportMaterial.docente===""?"text-red-500":"text-green-500")},[t[26]||(t[26]=r("span",{class:"font-medium text-neutral-800 dark:text-neutral-200"},"Docente: ",-1)),u(" "+o(e.theSupportMaterial.docente===""?"No seleccionado":e.theSupportMaterial.docente),1)],2),r("p",{class:s(e.theSupportMaterial.parcial===0?"text-red-500":"text-green-500")},[t[27]||(t[27]=r("span",{class:"font-medium text-neutral-800 dark:text-neutral-200"},"Parcial: ",-1)),u(" "+o(e.theSupportMaterial.parcial===0?"No seleccionado":e.reWrite[e.theSupportMaterial.parcial])+" Parcial ",1)],2),r("p",{class:s(e.theSupportMaterial.type===""?"text-red-500":"text-green-500")},[t[28]||(t[28]=r("span",{class:"font-medium text-neutral-800 dark:text-neutral-200"},"Tipo: ",-1)),u(" "+o(e.theSupportMaterial.type===""?"No seleccionado":e.theSupportMaterial.type),1)],2)])])):k("",!0)])],64)}const rt=U(P,[["render",X]]);export{rt as default};
